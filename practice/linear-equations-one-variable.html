<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Topic Practice | Dream School Academy</title>
  <link rel="stylesheet" href="../style.css" />
  <style>
    :root{ --bg:#0f1420; --card:#1b2231; --ink:#e8eefc; --muted:#a9b5cc; --brand:#00d8ff; --border:rgba(255,255,255,.08); }
    body{ background:var(--bg); color:var(--ink); }
    main{ max-width:900px; margin:0 auto; padding:24px; }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:20px; }
    .bar{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:16px; }
    h1{ font-size:1.4rem; margin:0; }
    .muted{ color:var(--muted); }
    .q-stem{ font-size:1.05rem; line-height:1.55; margin-bottom:14px; }
    .choices{ display:grid; gap:10px; }
    .choice{ display:flex; gap:10px; align-items:flex-start; padding:10px 12px; border:1px solid var(--border); border-radius:10px; cursor:pointer; }
    .nav{ display:flex; gap:8px; margin-top:16px; flex-wrap:wrap; }
    .btn{ background:var(--brand); color:#051018; border:0; border-radius:999px; padding:10px 14px; font-weight:700; cursor:pointer; }
    .btn.secondary{ background:transparent; color:var(--ink); border:1px solid var(--border); }
    .btn[disabled]{ opacity:.6; cursor:not-allowed; }
    .saved{ margin-top:10px; color:#9be7ff; display:none; }
    .footer-note{ margin-top:8px }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <a class="logo-button" href="/">Dream School Academy</a>
      <nav>
        <a href="/study">Study</a>
        <a href="/practice">Practice</a>
        <a href="/contactus">Contact Us</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="card" id="practice-card">
      <div class="bar">
        <h1 id="title">Topic Practice</h1>
        <div class="muted"><span id="count">1</span>/<span id="total">0</span></div>
      </div>

      <div id="stem" class="q-stem"></div>
      <div id="choices" class="choices"></div>

      <div class="nav">
        <button id="back" class="btn secondary">Back</button>
        <button id="next" class="btn secondary">Next</button>
        <button id="finish" class="btn">Finish</button>
      </div>
      <p class="muted footer-note">You can change answers any time before you click Finish. We do not grade this page.</p>
      <p id="saved" class="saved">Saved ✔ Your responses are stored on this device.</p>
    </div>
  </main>

  <script>
    // Fixed topic for this page
    const TOPIC = "linear-equations-one-variable";

    // Data for this page’s topic
    const DATASETS = {
      "linear-equations-one-variable": {
        title: "Linear Equations in One Variable — Practice",
        questions: [
          { id:"26fac581", stem:"If 2(x − 5) + 3(x − 5) = 10, what is the value of x − 5?", choices:["2","5","7","12"] },
          { id:"48bad848", stem:"Megan worked 10 hours. She earns p per hour for the first 8 hours and 1.5p per hour after 8 hours. Her total pay was $137.50. What is p?", choices:["$11.75","$12.50","$13.25","$13.75"] },
          { id:"f0581e16", stem:"Gas is $4/gal and car averages 25 mpg. Alan wants to reduce weekly gas spending by $5. Let m be miles fewer per week. Which equation is correct?", choices:["(25/4)m = 95","(25/4)m = 5","(4/25)m = 95","(4/25)m = 5"] },
          { id:"6e706172", stem:"Cost $65; price $100; 20% commission on price. Profit per unit = price − (cost + commission). Equation for profit $6,840 over u units?", choices:["(100(1−0.2) − 65)u = 6840","(100 − 65)(1−0.2)u = 6840","0.8(100) − 65u = 6840","(0.2(100) + 65)u = 6840"] },
          { id:"509cb1a6", stem:"4x + 12 = a(x + 3)/2 has infinitely many solutions. Find a.", choices:["0","3","8","12"] }
        ]
      }
    };

    // Always run the practice for this page’s topic
    runPractice(DATASETS[TOPIC]);

    // Practice (no grading)
    function runPractice(dataset){
      const titleEl   = document.getElementById('title');
      const stemEl    = document.getElementById('stem');
      const choicesEl = document.getElementById('choices');
      const backBtn   = document.getElementById('back');
      const nextBtn   = document.getElementById('next');
      const finishBtn = document.getElementById('finish');
      const countEl   = document.getElementById('count');
      const totalEl   = document.getElementById('total');
      const savedEl   = document.getElementById('saved');

      const QUESTIONS = dataset.questions;
      titleEl.textContent = dataset.title;
      totalEl.textContent = QUESTIONS.length.toString();

      const STORAGE_KEY = `dsa:resp:${TOPIC}`;
      let responses = [];
      try {
        const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        if (Array.isArray(saved)) responses = saved;
      } catch {}
      if (responses.length !== QUESTIONS.length) {
        responses = new Array(QUESTIONS.length).fill(null);
      }

      let idx = 0;
      render();

      backBtn.addEventListener('click', ()=>{ if(idx>0){ idx--; render(); }});
      nextBtn.addEventListener('click', ()=>{ if(idx<QUESTIONS.length-1){ idx++; render(); }});
      finishBtn.addEventListener('click', ()=>{
        localStorage.setItem(STORAGE_KEY, JSON.stringify(responses));
        savedEl.style.display = 'block';
        window.scrollTo({top:0, behavior:'smooth'});
      });

      function render(){
        const q = QUESTIONS[idx];
        countEl.textContent = (idx+1).toString();
        savedEl.style.display = 'none';

        stemEl.textContent = q.stem;

        choicesEl.innerHTML = '';
        q.choices.forEach((text, i)=>{
          const id = `q${idx}_c${i}`;
          const label = document.createElement('label');
          label.className = 'choice';
          label.setAttribute('for', id);

          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `q${idx}`;
          radio.id   = id;
          radio.value = i;
          if (responses[idx] === i) radio.checked = true;

          radio.addEventListener('change', ()=>{
            responses[idx] = i;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(responses));
          });

          const txt = document.createElement('div');
          txt.textContent = text;

          label.appendChild(radio);
          label.appendChild(txt);
          choicesEl.appendChild(label);
        });

        backBtn.disabled = idx === 0;
        nextBtn.disabled = idx === QUESTIONS.length-1;
      }
    }
  </script>
</body>
</html>
